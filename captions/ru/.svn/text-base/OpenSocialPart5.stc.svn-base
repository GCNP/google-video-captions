*TC 00:00:06;02
В этом разделе мы сделаем так,
чтобы наш пример

*TC 00:00:07;25
приложения, рассылающего 
подарки друзьям, а также

*TC 00:00:10;19
содержащего список отправленных 
подарков, показывал, какие подарки

*TC 00:00:13;02
нам отправляли наши друзья.

*TC 00:00:16;04
Сначала нужно внести
небольшое изменение

*TC 00:00:19;03
в наш XML-файл гаджета, чтобы 
создать место для вставки

*TC 00:00:22;05
списка полученных подарков.

*TC 00:00:24;01
Затем нужно внести еще 
два небольших изменения,

*TC 00:00:25;26
одно – в функции "loadFriends,"
а другое – в функции "giveGift",

*TC 00:00:27;26
чтобы производить 
запрос данных друзей,

*TC 00:00:31;24
а также наших собственных данных.

*TC 00:00:32;21
Сначала мы изменяем функцию 
"loadFriends" так, чтобы кроме

*TC 00:00:35;24
запроса информации о"viewer" и "viewerFriends",

*TC 00:00:38;21
а также личных данных 
приложения "viewer",

*TC 00:00:41;10
мы также запрашивали данные приложения"viewerFriends'".

*TC 00:00:45;21
Затем мы таким же образом изменяем
функцию "giveGift", чтобы

*TC 00:00:49;13
запросы были параллельными.

*TC 00:00:52;06
В-третьих, мы обновляем функцию 
"onLoadFriends", чтобы помимо извлечения

*TC 00:00:55;11
информации о "viewer",
"viewerFriends"

*TC 00:00:57;20
и "giftData", мы 
извлекали информацию 

*TC 00:01:00;03
"viewerfriendData", который 
представляет собой список подарков,

*TC 00:01:02;14
отправленный всеми
нашими друзьями.

*TC 00:01:04;17
Затем эта функция повторно 
проходит по списку друзей,

*TC 00:01:07;06
отображает меню для
выбора друга,

*TC 00:01:09;06
которому нужно отправить подарок,

*TC 00:01:10;15
обновляет список
отправленных вами подарков

*TC 00:01:14;16
и, наконец, вызывает новую функцию
"updateReceivedList", которая

*TC 00:01:17;25
отображает список подарков,
полученных вами от друзей.

*TC 00:01:21;16
"updateReceivedList" почти
параллельна функции "updateGiftList,"

*TC 00:01:24;29
но выполняет "проход" не 
только по списку подарков,

*TC 00:01:27;10
отправленных вами,
но и по всему списку друзей,

*TC 00:01:30;06
извлекает данные приложения
только для данного друга 

*TC 00:01:33;12
с указанным ID друга, затем
конвертирует извлекаемые данные

*TC 00:01:36;23
в объект
JavaScript.

*TC 00:01:40;00
Получив список подарков,
отправленных другом,

*TC 00:01:42;18
она обращается к каждому подарку,
сравнивая ID друга, которому

*TC 00:01:45;14
был отправлен подарок, с вашим ID.

*TC 00:01:47;22
При совпадении ID функция добавляет этот 
подарок в список подарков, отправленных вам.

*TC 00:01:52;19
По окончанию составления списка 
подарков, отправленных вам,

*TC 00:01:54;06
он вставляется на страницу.

*TC 00:01:57;09
Здесь можно посмотреть на новую
версию нашего гаджета,

*TC 00:01:59;16
которая отображает не только параметры
отправки подарков друзьям

*TC 00:02:02;24
и списки уже отправленных
подарков,

*TC 00:02:05;01
но и список подарков,
присланных друзьями.

*TC 00:02:07;29
Подробнее об этой теме 

*TC 00:02:10;04
и об API OpenSocial

*TC 00:02:12;15
можно узнать в руководстве 
на сайте code.google.com

*TC 00:02:15;01
в разделе, посвященном OpenSocial.