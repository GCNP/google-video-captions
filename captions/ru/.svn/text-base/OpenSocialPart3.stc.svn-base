*TC 00:00:06;00
Теперь мы создадим 
приложение, которое 

*TC 00:00:07;23
позволяет отправлять подарки 
пользователям из списка друзей.

*TC 00:00:12;14
Для начала внесем небольшие 
изменения в XML-файл.

*TC 00:00:15;19
Создадим форму со списком 
друзей и списком подарков, 

*TC 00:00:19;20
а также кнопку отправки 
подарка другу.

*TC 00:00:23;18
Затем изменим функцию
"onLoadFriends", 

*TC 00:00:26;12
чтобы вместо списка 
друзей на странице

*TC 00:00:28;29
она создавала меню, 
позволяющее выбрать друга.

*TC 00:00:32;15
Теперь создадим другую функцию, 
"makeOptionsMenu",

*TC 00:00:35;04
которая превращает указанный 
нами список подарков

*TC 00:00:37;10
в меню, что позволяет 
выбрать подарок для друга.

*TC 00:00:41;21
Затем мы меняем нашу 
функцию инициализации, 

*TC 00:00:43;26
чтобы при загрузке гаджета
она загружала не только

*TC 00:00:45;19
меню со списком друзей,
но и меню со списком подарков.

*TC 00:00:49;02
Последним и самым важным шагом является написание функции "giveGift".

*TC 00:00:52;13
Эта функция извлекает название подарка и 
имя друга, которому мы хотим отправить  

*TC 00:00:56;17
этот подарок, и сохраняет их 
в постоянное хранилище данных 

*TC 00:00:59;03
API OpenSocial.

*TC 00:01:00;25
Чтобы задать эту функцию, мы 
создаем объект newDataRequest 

*TC 00:01:03;21
и внедряем в него новый запрос данных 
"updatePerson" протокола Atom (APP),

*TC 00:01:06;27
который указывает, что данные
нужно сохранить в объекте "viewer".

*TC 00:01:10;10
Затем мы отправляем запрос в 
API OpenSocial, 

*TC 00:01:12;20
где хранятся данные.

*TC 00:01:14;04
Теперь гаджет работает.

*TC 00:01:15;29
Он предоставляет список подарков и

*TC 00:01:17;14
список друзей и содержит кнопку 
для отправки подарка другу.

*TC 00:01:21;11
Подробнее об этой теме 

*TC 00:01:23;08
можно прочитать в руководстве на сайте 
code.google.com 

*TC 00:01:25;14
в разделе, посвященном OpenSocial.