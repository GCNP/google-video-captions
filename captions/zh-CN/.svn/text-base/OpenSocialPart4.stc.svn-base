*TC 00:00:06;09
在本部分中，我们要引用刚才创建的 

*TC 00:00:09;02 
给予朋友礼物的示例小工具， 

*TC 00:00:11;17
并对其进行略微修改，

*TC 00:00:12;27
以便我们将礼物赠送给他们后，我们可以看到这些礼物

*TC 00:00:15;23
我们准备从修改
“giveGift”函数开始， 

*TC 00:00:18;15
以便它不仅更新数据，还请求数据返回到

*TC 00:00:22;01
数据请求对象中。我们将指定， 

*TC 00:00:24;24
除了更新视图应用程序数据， 

*TC 00:00:27;13
我们还请求有关浏览者和 

*TC 00:00:29;28
浏览者朋友的信息，以及浏览者的个人信息存储

*TC 00:00:34;25
在“loadFriends”函数中， 

*TC 00:00:36;27
我们也要执行类似的一些操作

*TC 00:00:38;23
以便当我们加载朋友列表和视图朋友时，


*TC 00:00:41;14
我们还会请求浏览者的个人应用程序存储

*TC 00:00:46;02
我们将使这两个请求并行运行，

*TC 00:00:48;12
以便当我们初始化小工具或给予礼物时， 

*TC 00:00:50;26
我们可以发送回调同组信息，

*TC 00:00:54;25
然后修改我们的“onLoadFriends”函数

*TC 00:00:57;00
这样，除了指定浏览者和浏览者朋友，

*TC 00:01:00;27
我们还调出了礼物数据，即我们再次给予的礼物列表，

*TC 00:01:04;04
我们将朋友列表创建为选择菜单， 

*TC 00:01:07;05
将其插入页面后，

*TC 00:01:09;24
我们便会调用“updateGiftList”函数 

*TC 00:01:11;27
（它将会显示我们
已赠送的礼物列表）。

*TC 00:01:14;09
更新礼物列表可
调出我们已赠送的 

*TC 00:01:18;01
数据数组的信息

*TC 00:01:19;06
通过视图 ID 和礼物关键字进行指定 

*TC 00:01:22;13
其中存储了我们的信息

*TC 00:01:24;08
然后，将此数据提取出来，并将其从“JSON 字符串” 

*TC 00:01:28;10
转换回可使用的 Javascript 对象

*TC 00:01:30;14
拥有了该对象（即朋友 ID 和 

*TC 00:01:33;15
礼物 ID 对）后，

*TC 00:01:34;17
便可以将其转换为字符串， 

*TC 00:01:37;06
该字符串可指定
已向其赠送礼物的朋友 

*TC 00:01:38;27
和已赠送给他们的礼物

*TC 00:01:41;12
然后，我们可以将该列表作为 HTML 插入页面

*TC 00:01:44;21
最后，我们对小工具 XML 文件进行一个小改动， 

*TC 00:01:47;27
以便我们有地方插入 HTML

*TC 00:01:52;03
此处是小工具的新版本，现在显示了 

*TC 00:01:54;07
我们已赠送的礼物列表，

*TC 00:01:55;27
这样当我单击赠送礼物按钮时，
 
*TC 00:01:58;00
它会在以下列表中
显示。

*TC 00:02:00;11
有关刚才向您所介绍
内容 

*TC 00:02:02;02
以及 
Social API 的详细信息，

*TC 00:02:04;06
请查看“code.google.com”
上 Open Social 部分下的 

*TC 00:02:06;20
教程 





